!function(){"use strict";angular.module("emd.ng-xtorage",[]).provider("$xtorage",function(){var a=this,b="infinity",c="sessionStorage",d="localStorage";a.storage=d,a.storageExpiration=b,this.$get=["$window","$timeout",function(e,f){var g=a.storage,h=a.storageExpiration,i=function(a,b){var c=null;try{c=angular.fromJson(a)}catch(d){c=b?parseInt(a):a}return c},j=function(a){var b=/[0-9]/;if(!angular.isString(a)||!a.length)return null;for(var c=0;c<a.length;c++)if(!b.test(a[c]))return!1;return!0},k=function(a){return angular.isArray(a)&&a.length},l=function(a){var b=angular.isObject(a)?a:{};return b.storage||g},m=function(a){var b=angular.isObject(a)?a:{};return b.expiration||h},n=function(a,b,c){f(function(){e[b].removeItem(a)},c)},o=function(a,c,d){var f=l(d),g=m(d);if(k(a))for(var i=0;i<a.length;i++)angular.isObject(c[i])?e[f].setItem(a[i],angular.toJson(c[i])):e[f].setItem(a[i],c[i]),h!==b&&n(a[i],f,g);else angular.isObject(c)?e[f].setItem(a,angular.toJson(c)):e[f].setItem(a,c),h!==b&&n(a,f,g)},p=function(a,b){var c=l(b),d=e[c].getItem(a),f=[];if(k(a)){for(var g=0;g<a.length;g++){var h=e[c].getItem(a[g]);h&&f.push(i(h))}k(f)||(f=null)}else f=i(d,j(d));return f},q=function(a,b){var c=l(b);if(k(a))for(var d=0;d<a.length;d++)e[c].removeItem(a[d]);else e[c].removeItem(a)},r=function(a){var b=l(a);e[b].clear()},s=function(a){return this.get(a,{storage:c})},t=function(a){return this.get(a,{storage:d})},u=function(a,b){this.save(a,b,{storage:c})},v=function(a,b){this.save(a,b,{storage:d})},w=function(a){this.remove(a,{storage:c})},x=function(a){this.remove(a,{storage:d})},y=function(a){this.clear(a,{storage:c})},z=function(a){this.clear(a,{storage:d})};return{get:p,save:o,remove:q,clear:r,getFromSessionStorage:s,getFromLocalStorage:t,saveInSessionStorage:u,saveInLocalStorage:v,removeFromSessionStorage:w,removeFromLocalStorage:x,clearSessionStorage:y,clearLocalStorage:z}}]}).directive("$xtorageFormCache",["$xtorage",function(a){var b=function(b,c,d){var e="infoToBeSaved",f=d.storageKey;d.$observe(e,function(b){a.save(f,b)})};return b}])}();