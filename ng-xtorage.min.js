!function(){"use strict";angular.module("emd.ng-xtorage",[]).provider("$xtorage",function(){var a=this,b="infinity";a.storage="localStorage",a.storageExpiration=b,this.$get=["$window","$timeout",function(c,d){var e=a.storage,f=a.storageExpiration,g=function(a,b){var c=null;try{c=angular.fromJson(a)}catch(d){c=b?parseInt(a):a}return c},h=function(a){var b=/[0-9]/;if(!angular.isString(a)||!a.length)return null;for(var c=0;c<a.length;c++)if(!b.test(a[c]))return!1;return!0},i=function(a){return angular.isArray(a)&&a.length},j=function(a){var b=angular.isObject(a)?a:{};return b.storage||e},k=function(a){var b=angular.isObject(a)?a:{};return b.expiration||f},l=function(a,b,e){d(function(){c[b].removeItem(a)},e)},m=function(a,d,e){var g=j(e),h=k(e);if(i(a))for(var m=0;m<a.length;m++)angular.isObject(d[m])?c[g].setItem(a[m],angular.toJson(d[m])):c[g].setItem(a[m],d[m]),f!==b&&l(a[m],g,h);else angular.isObject(d)?c[g].setItem(a,angular.toJson(d)):c[g].setItem(a,d),f!==b&&l(a,g,h)},n=function(a,b){var d=j(b),e=c[d].getItem(a),f=[];if(i(a)){for(var k=0;k<a.length;k++){var l=c[d].getItem(a[k]);l&&f.push(g(l))}i(f)||(f=null)}else f=g(e,h(e));return f},o=function(a,b){var d=j(b);if(i(a))for(var e=0;e<a.length;e++)c[d].removeItem(a[e]);else c[d].removeItem(a)},p=function(a){var b=j(a);c[b].clear()};return{get:n,save:m,remove:o,clear:p}}]})}();