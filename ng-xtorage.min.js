!function(){"use strict";angular.module("emd.ng-xtorage",[]).provider("$xtorage",function(){var e=this,t="infinity",r="sessionStorage",n="localStorage",o="$xpiration",a=6e4;e.storage=n,e.storageExpiration=t,this.$get=["$window","$xpirationChecker","$interval",function(i,s,c){var u=e.storage,g=e.storageExpiration,l=function(){var e=this,t=c(function(){e.getFromLocalStorage(o).filter(function(e){return s.timeToExpire(e)}).forEach(function(r){e.removeFromLocalStorage(r.key),e.removeFromSessionStorage(r.key),c.cancel(t)})},a)},f=function(e,t){var r=null;try{r=angular.fromJson(e)}catch(n){r=t?parseInt(e):e}return r},v=function(e){var t=/[0-9]/;if(!angular.isString(e)||!e.length)return null;for(var r=0;r<e.length;r++)if(!t.test(e[r]))return!1;return!0},h=function(e){return angular.isArray(e)&&e.length},m=function(e){var t=angular.isObject(e)?e:{};return t.storage||u},S=function(e){var t=angular.isObject(e)?e:{};return t.expiration||g},p=function(e){var t=this.getFromLocalStorage(o)||[];t.push(e);var r=t;I(o,r,"localStorage")},x=function(e,t){var r=this,n={};n.key=e,n.expire=i.Date.now()+t,p.call(r,n),l.call(this)},I=function(e,t,r){angular.isObject(t)?i[r].setItem(e,angular.toJson(t)):i[r].setItem(e,t)},F=function(e,r,n){var o=m(n),a=S(n);if(h(e))for(var i=0;i<e.length;i++)I(e[i],r[i],o),a!==t&&x.call(this,e[i],a);else I(e,r,o),a!==t&&x.call(this,e,a)},$=function(e,t){var r=m(t),n=i[r].getItem(e),o=[];if(h(e)){for(var a=0;a<e.length;a++){var s=i[r].getItem(e[a]);s&&o.push(f(s))}h(o)||(o=null)}else o=f(n,v(n));return o},L=function(e,t){var r=m(t);if(h(e))for(var n=0;n<e.length;n++)i[r].removeItem(e[n]);else i[r].removeItem(e)},w=function(e){var t=m(e);i[t].clear()},y=function(e){return this.get(e,{storage:r})},d=function(e){return this.get(e,{storage:n})},k=function(e,t){this.save(e,t,{storage:r})},E=function(e,t){this.save(e,t,{storage:n})},b=function(e){this.remove(e,{storage:r})},j=function(e){this.remove(e,{storage:n})},O=function(e){this.clear(e,{storage:r})},C=function(e){this.clear(e,{storage:n})};return{get:$,save:F,remove:L,clear:w,getFromSessionStorage:y,getFromLocalStorage:d,saveInSessionStorage:k,saveInLocalStorage:E,removeFromSessionStorage:b,removeFromLocalStorage:j,clearSessionStorage:O,clearLocalStorage:C}}]}).service("$xpirationChecker",["$window",function(e){var t=function(t){return e.Date.now()>=t.expire};this.timeToExpire=t}])}();