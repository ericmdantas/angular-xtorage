!function(){"use strict";angular.module("emd.ng-xtorage",[]).provider("$xtorage",function(){var a=this,b="infinity",c="sessionStorage",d="localStorage",e="$xpiration",f=6e4;a.storage=d,a.storageExpiration=b,this.$get=["$window","$xpirationChecker","$interval",function(g,h,i){var j=a.storage,k=a.storageExpiration,l=function(){var a=this,b=i(function(){a.getFromLocalStorage(e).filter(function(a){return h.timeToExpire(a)}).forEach(function(c){a.removeFromLocalStorage(c.key),a.removeFromSessionStorage(c.key),i.cancel(b)})},f)},m=function(a,b){var c=null;try{c=angular.fromJson(a)}catch(d){c=b?parseInt(a):a}return c},n=function(a){var b=/[0-9]/;if(!angular.isString(a)||!a.length)return null;for(var c=0;c<a.length;c++)if(!b.test(a[c]))return!1;return!0},o=function(a){return angular.isArray(a)&&a.length},p=function(a){var b=angular.isObject(a)?a:{};return b.storage||j},q=function(a){var b=angular.isObject(a)?a:{};return b.expiration||k},r=function(a){var b=this.getFromLocalStorage(e)||[];b.push(a);var c=b;t(e,c,"localStorage")},s=function(a,b){var c=this,d={};d.key=a,d.expire=g.Date.now()+b,r.call(c,d),l.call(this)},t=function(a,b,c){angular.isObject(b)?g[c].setItem(a,angular.toJson(b)):g[c].setItem(a,b)},u=function(a,c,d){var e=p(d),f=q(d);if(o(a))for(var g=0;g<a.length;g++)t(a[g],c[g],e),f!==b&&s.call(this,a[g],f);else t(a,c,e),f!==b&&s.call(this,a,f)},v=function(a,b){var c=p(b),d=g[c].getItem(a),e=[];if(o(a)){for(var f=0;f<a.length;f++){var h=g[c].getItem(a[f]);h&&e.push(m(h))}o(e)||(e=null)}else e=m(d,n(d));return e},w=function(a,b){var c=p(b);if(o(a))for(var d=0;d<a.length;d++)g[c].removeItem(a[d]);else g[c].removeItem(a)},x=function(a){var b=p(a);g[b].clear()},y=function(a){return this.get(a,{storage:c})},z=function(a){return this.get(a,{storage:d})},A=function(a,b){this.save(a,b,{storage:c})},B=function(a,b){this.save(a,b,{storage:d})},C=function(a){this.remove(a,{storage:c})},D=function(a){this.remove(a,{storage:d})},E=function(a){this.clear(a,{storage:c})},F=function(a){this.clear(a,{storage:d})};return{get:v,save:u,remove:w,clear:x,getFromSessionStorage:y,getFromLocalStorage:z,saveInSessionStorage:A,saveInLocalStorage:B,removeFromSessionStorage:C,removeFromLocalStorage:D,clearSessionStorage:E,clearLocalStorage:F}}]}).service("$xpirationChecker",["$window",function(a){var b=function(b){return a.Date.now()>=b.expire};this.timeToExpire=b}])}();